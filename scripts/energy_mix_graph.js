(async function () {
  const labels = [];
  for (i = 1974; i < 2024; i++) {
    labels.push(i);
  }
  const data = {
    labels: labels,
    datasets: [
      {
        label: "Hydro",
        data: [
          15037, 16497, 15344, 14573, 15503, 18259, 19171, 19483, 18121, 19554, 20173, 19511, 21877, 21709, 22733,
          22333, 22953, 22666, 20882, 23258, 25579, 27259, 25921, 23026, 25066, 22690, 24191, 21464, 24624, 23387,
          26968, 23094, 23337, 23404, 22124, 23975, 24479, 24860, 22668, 22799, 24075, 24285, 25676, 24924, 25992,
          25343, 24024, 23992, 26013, 26309
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Geothermal",
        data: [
          1304, 1296, 1236, 1163, 1185, 1064, 1152, 1087, 1104, 1119, 1240, 1111, 1180, 1174, 1183, 1652, 1957, 2104,
          2077, 2193, 2047, 1985, 1984, 2077, 2331, 2583, 2717, 2627, 2606, 2550, 2584, 2922, 3125, 3305, 3917, 4539,
          5507, 5831, 6030, 6385, 7128, 7682, 7671, 7712, 7675, 7737, 7778, 7918, 7984, 7709
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Biogas",
        data: [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 25, 46, 50, 50, 50, 58, 67, 79, 66, 72, 71, 67, 76, 101, 120,
          126, 146, 144, 140, 147, 152, 159, 153, 142, 165, 176, 186, 196, 196, 203, 210, 203, 204, 213
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Wind",
        data: [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 8, 13, 22, 39, 119, 138, 154, 145, 358, 608,
          616, 921, 1048, 1462, 1620, 1936, 2057, 2000, 2189, 2340, 2317, 2070, 2047, 2233, 2286, 2618, 2837, 3206
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Solar PV",
        data: [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 4, 4,
          4, 5, 7, 19, 36, 56, 76, 100, 127, 160, 208, 283, 371
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Oil",
        data: [
          1943, 787, 1280, 729, 199, 48, 3, 3, 15, 146, 5, 48, 6, 9, 7, 1, 9, 24, 192, 59, 20, 48, 15, 0, 1, 0, 0, 0, 0,
          19, 23, 4, 23, 1, 124, 9, 2, 2, 3, 3, 3, 1, 3, 5, 11, 4, 13, 26, 7, 4
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Coal",
        data: [
          1281, 1030, 1081, 894, 705, 345, 378, 342, 374, 603, 681, 653, 492, 765, 582, 307, 436, 227, 947, 454, 397,
          592, 631, 1226, 781, 1123, 889, 1373, 1362, 3035, 3816, 4867, 4536, 2354, 3943, 2528, 1300, 1477, 2720, 1619,
          1228, 1134, 404, 517, 891, 1463, 1576, 2377, 672, 505
        ],
        fill: false,
        tension: 0.1
      },
      {
        label: "Gas",
        data: [
          186, 28, 1778, 3932, 3740, 1923, 1471, 1790, 4343, 4092, 4508, 5698, 4430, 4677, 5071, 5510, 5280, 6499, 6940,
          6474, 4942, 4172, 5556, 7225, 5328, 7213, 7432, 9421, 7718, 7060, 4814, 6808, 7364, 9230, 8002, 7031, 7821,
          6504, 6834, 6842, 5327, 5192, 4512, 5604, 4450, 4545, 5060, 3801, 3522, 3471
        ],
        fill: false,
        tension: 0.1
      }
    ]
  };

  var c = new Chart(document.getElementById("energy_mix"), {
    type: "line",
    data: data,
    options: {
      responsive: true,
      maintainAspectRatio: true,
      onResize: (chart, newSize) => {
        console.log("A", chart);
        console.log("B", newSize);
        for (let id in Chart.instances) {
          Chart.instances[id].resize();
        }
        
        //chart.resize();
        //chart.canvas.parentNode.style.paddingBottom = chart.canvas.height;
      },
      scales: {
        x: {
          title: {
            display: true,
            text: "Year"
          }
        },
        y: {
          title: {
            display: true,
            text: "(GWh)"
          }
        }
      }
    }
  });
})();
